# Config

host:
db.nhbndiidngbfuhycsyla.supabase.co

database name:
postgres

port:
5432

User:
postgres

password:
ttmobileAA@1233

# Prints

## Modelagem

![image](https://github.com/Tchurus-Banks-Tchurus-Pay/documentation/assets/101291672/3288b0c9-9b08-4689-a26a-66e5bed15b87)


# Script

```sql
create table
  public.profiles (
    id uuid not null,
    updated_at timestamp with time zone null,
    username text null,
    full_name text null,
    avatar_url text null,
    website text null,
    main_currency_code text null,
    constraint profiles_pkey primary key (id),
    constraint profiles_username_key unique (username),
    constraint profiles_username_unique unique (username),
    constraint profiles_id_fkey foreign key (id) references auth.users (id),
    constraint username_length check ((char_length(username) >= 3))
  ) tablespace pg_default;


create table
  public.favorites_currency (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default now(),
    currency_code text not null,
    user_id uuid not null,
    constraint favorites_currency_pkey primary key (id),
    constraint favorites_currency_user_id_fkey foreign key (user_id) references profiles (id) on delete cascade
  ) tablespace pg_default;

create table
  public.firebase_token_user (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default now(),
    device_id text not null,
    firebase_token text not null,
    user_id uuid null,
    constraint firebase_token_user_pkey primary key (id),
    constraint uq_device_id unique (device_id),
    constraint uq_firebase_token unique (firebase_token),
    constraint firebase_token_user_user_id_fkey foreign key (user_id) references profiles (id)
  ) tablespace pg_default;

create index if not exists idx_profiles_username on public.profiles using btree (username) tablespace pg_default;

create table
  public.transactions (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default now(),
    from_user_id uuid not null,
    to_user_id uuid not null,
    value text not null,
    currency_code text not null,
    constraint transactions_pkey primary key (id),
    constraint transactions_from_user_id_fkey foreign key (from_user_id) references profiles (id),
    constraint transactions_to_user_id_fkey foreign key (to_user_id) references profiles (id)
  ) tablespace pg_default;

create table
  public.user_portfolio (
    id bigint generated by default as identity,
    created_at timestamp with time zone not null default now(),
    currency_code text null,
    amount text null,
    user_id uuid null,
    constraint user_portfolio_pkey primary key (id),
    constraint user_portfolio_currency_user unique (currency_code, user_id),
    constraint user_portfolio_user_id_fkey foreign key (user_id) references profiles (id)
  ) tablespace pg_default;
```
